(()=>{"use strict";var e={inputSelector:".popup__form-item",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__form-item_type_error",errorClass:"popup__error-text_visible",popupEditProfileSelector:".popup_type_edit-form",popupAddForm:".popup_type_add-form",popupAvatarForm:".popup_type_avatar-form"};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const n=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parameters=t,this._formSelector=n,this._inputList=Array.from(document.querySelector(this._formSelector).querySelectorAll(this._parameters.inputSelector))}var n,r;return n=e,(r=[{key:"_showInputError",value:function(e,t){var n=e.nextElementSibling;n.textContent=t,n.classList.add(this._parameters.errorClass),e.classList.add(this._parameters.inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=e.nextElementSibling;t.textContent="",t.classList.remove(this._parameters.errorClass),e.classList.remove(this._parameters.inputErrorClass)}},{key:"_checkInputValidity",value:function(e){if(e.validity.valid)this._hideInputError(e);else{var t=e.validationMessage;this._showInputError(e,t)}}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._parameters.inactiveButtonClass),t.setAttribute("disabled",!0)):(t.classList.remove(this._parameters.inactiveButtonClass),t.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(e){var t=this,n=e.querySelector(this._parameters.submitButtonSelector);this._toggleButtonState(this._inputList,n),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState(t._inputList,n)}))}))}},{key:"cleanInputErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){var e=document.querySelector(this._formSelector);e.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(e)}}])&&t(n.prototype,r),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const o=function(){function e(t,n,r,o,i){var a=t.name,u=t.link,c=t.likes,s=t.cardId,l=t.owner,p=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=a,this._link=u,this._likes=c,this._cardId=s,this._owner=l,this._user=p,this._templateSelector=n,this._openPopupWithImage=r,this._openPopupWithQuestion=o,this._likeCards=i}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".cards__item").cloneNode(!0)}},{key:"_zoomImage",value:function(){this._openPopupWithImage({name:this._name,link:this._link})}},{key:"_deleteCard",value:function(){this._openPopupWithQuestion({element:this._element,id:this._cardId})}},{key:"_likeCard",value:function(){this._like=this._element.querySelector(".cards__like"),this._like.classList.contains("cards__like_active")?this._likeCards({element:this._element,cardId:this._cardId,method:"DELETE"}):this._likeCards({element:this._element,cardId:this._cardId,method:"PUT"})}},{key:"_checkLikes",value:function(){var e=this;this._likes.some((function(t){return t._id===e._user}))&&this._element.querySelector(".cards__like").classList.add("cards__like_active")}},{key:"_setCardListeners",value:function(){var e=this;this._element.querySelector(".cards__like").addEventListener("click",(function(){e._likeCard()})),this._element.querySelector(".cards__delete").addEventListener("click",(function(){e._deleteCard()})),this._element.querySelector(".cards__image").addEventListener("click",(function(){e._zoomImage()}))}},{key:"generateCard",value:function(){this._element=this._getTemplate();var e=this._element.querySelector(".cards__image");return e.alt=this._name,e.src=this._link,this._element.querySelector(".cards__text").textContent=this._name,this._element.querySelector(".cards__counter").textContent=this._likes.length,this._checkLikes(),this._setCardListeners(),this._owner!=this._user?(this._element.querySelector(".cards__delete").classList.add("cards__delete_disabled"),this._element):this._element}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e,t){var n=this,r=t.userId;e.forEach((function(e){var t=e.name,o=e.link,i=e.likes,a=e.cardId,u=e.owner;n._renderer({name:t,link:o,likes:i,cardId:a,owner:u,userId:r})}))}},{key:"addItemPrepend",value:function(e){this._container.prepend(e)}},{key:"addItemAppend",value:function(e){this._container.append(e)}}])&&i(t.prototype,n),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._closePopupByClickOnOverlay=this._closePopupByClickOnOverlay.bind(this),this.close=this.close.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_closePopupByClickOnOverlay",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popup.querySelector(".popup__close-button").addEventListener("click",this.close),this._popup.addEventListener("mouseup",this._closePopupByClickOnOverlay)}}])&&u(t.prototype,n),e}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imagePopupUrl=t._popup.querySelector(".popup__image"),t._imagePopupCaption=t._popup.querySelector(".popup__caption"),t}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;this._imagePopupUrl.src=n,this._imagePopupUrl.alt=t,this._imagePopupCaption.textContent=t,p(d(a.prototype),"open",this).call(this)}}])&&l(t.prototype,n),a}(c);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleSubmitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleSubmitForm=r,t._popupForm=t._popup.querySelector(".popup__form"),t._inputList=t._popupForm.querySelectorAll(".popup__form-item"),t._button=t._popupForm.querySelector(".popup__submit-button"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"renderLoading",value:function(e){this._button.textContent=e?"Сохранение...":"Сохранить"}},{key:"setEventListeners",value:function(){var e=this;v(g(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e.renderLoading(!0),e._itemsValue=e._getInputValues(),e._handleSubmitForm(e._itemsValue)}))}},{key:"close",value:function(){v(g(a.prototype),"close",this).call(this),this._popupForm.reset()}}])&&m(t.prototype,n),a}(c);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(r);if(o){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleSubmitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleSubmitForm=r,t._popupForm=t._popup.querySelector(".popup__form"),t}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;P(I(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmitForm({element:e._element,id:e._id})}))}},{key:"open",value:function(e){var t=e.element,n=e.id;this._element=t,this._id=n,P(I(a.prototype),"open",this).call(this)}}])&&E(t.prototype,n),a}(c);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(t){var n=t.nameProfile,r=t.jobProfile;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameProfile=document.querySelector(n),this._jobProfile=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameProfile.textContent,about:this._jobProfile.textContent}}},{key:"setUserInfo",value:function(e){this._nameProfile.textContent=e.name,this._jobProfile.textContent=e.about}}])&&L(t.prototype,n),e}();function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=new(function(){function e(t){var n=t.url,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=n,this._headers=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e}))}},{key:"renewUserInfo",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e}))}},{key:"renewUserAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e}))}},{key:"createNewCard",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.title,link:e.url})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e}))}},{key:"likeCard",value:function(e,t){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:t,headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e}))}}])&&R(t.prototype,n),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"4f7cbaee-8eca-456c-b2b6-53b18a278335","Content-Type":"application/json"}});Promise.all([x.getInitialCards(),x.getUserInfo()]).then((function(t){var r,i,u=(i=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(r,i)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],s=u[1];!function(){var t=c.map((function(e){return{name:e.name,link:e.link,likes:e.likes,cardId:e._id,owner:e.owner._id}})),r=new a({renderer:function(e){var t=e.name,n=e.link,i=e.likes,a=e.cardId,u=e.owner,c=e.userId,s=new o({name:t,link:n,likes:i,cardId:a,owner:u,userId:c},"#card-template",g,E,P).generateCard();r.addItemAppend(s)}},".cards"),i=new n(e,e.popupEditProfileSelector),u=new n(e,e.popupAddForm),l=new n(e,e.popupAvatarForm),p=document.querySelector(".profile__overlay"),f=document.querySelector(".profile__avatar"),h=document.querySelector(".profile__edit-button"),d=document.querySelector(".popup__form-item_type_name-input"),y=document.querySelector(".popup__form-item_type_job-input"),m=new q({nameProfile:".profile__name",jobProfile:".profile__job"}),v=new S({popupSelector:".popup_type_edit-form",handleSubmitForm:function(e){x.renewUserInfo(e).then((function(e){m.setUserInfo(e),v.close()})).finally((function(){v.renderLoading(!1)})).catch((function(e){alert(e)}))}}),b=new S({popupSelector:".popup_type_avatar-form",handleSubmitForm:function(e){x.renewUserAvatar(e).then((function(e){f.src=e.avatar,b.close()})).finally((function(){b.renderLoading(!1)})).catch((function(e){alert(e)}))}}),k=new _(".popup_type_zoom-image");function g(e){var t=e.name,n=e.link;k.open({name:t,link:n})}var w=new j({popupSelector:".popup_type_question",handleSubmitForm:function(e){var t=e.element,n=e.id,r=t,o=n;x.deleteCard(o).then((function(e){r.remove(),w.close()})).catch((function(e){alert(e)}))}});function E(e){var t=e.element,n=e.id;w.open({element:t,id:n})}function P(e){var t=e.element,n=e.cardId,r=e.method;x.likeCard(n,r).then((function(e){t.querySelector(".cards__like").classList.toggle("cards__like_active"),t.querySelector(".cards__counter").textContent=e.likes.length})).catch((function(e){alert(e)}))}var C=document.querySelector(".profile__add-button"),O=new S({popupSelector:".popup_type_add-form",handleSubmitForm:function(e){x.createNewCard(e).then((function(e){var t=new o({name:e.name,link:e.link,likes:e.likes,cardId:e._id,owner:e.owner._id,userId:s._id},"#card-template",g,E,P).generateCard();r.addItemPrepend(t),O.close()})).finally((function(){O.renderLoading(!1)})).catch((function(e){alert(e)}))}});r.renderItems(t,{userId:s._id}),m.setUserInfo(s),f.src=s.avatar,i.enableValidation(),u.enableValidation(),l.enableValidation(),k.setEventListeners(),w.setEventListeners(),O.setEventListeners(),C.addEventListener("click",(function(){u.cleanInputErrors(),O.open()})),v.setEventListeners(),b.setEventListeners(),h.addEventListener("click",(function(){var e=m.getUserInfo();d.value=e.name,y.value=e.about,i.cleanInputErrors(),v.open()})),p.addEventListener("click",(function(){l.cleanInputErrors(),b.open()}))}()})).catch((function(e){alert(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhRdWVzdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9BcGkuanMiXSwibmFtZXMiOlsicGFyYW1ldGVyc1ZhbGlkYXRpb24iLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInBvcHVwRWRpdFByb2ZpbGVTZWxlY3RvciIsInBvcHVwQWRkRm9ybSIsInBvcHVwQXZhdGFyRm9ybSIsInBhcmFtZXRlcnMiLCJmb3JtU2VsZWN0b3IiLCJ0aGlzIiwiX3BhcmFtZXRlcnMiLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0TGlzdCIsInNvbWUiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImZvcm1FbGVtZW50IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsInRlbXBsYXRlU2VsZWN0b3IiLCJvcGVuUG9wdXBXaXRoSW1hZ2UiLCJvcGVuUG9wdXBXaXRoUXVlc3Rpb24iLCJsaWtlQ2FyZCIsIm5hbWUiLCJsaW5rIiwibGlrZXMiLCJjYXJkSWQiLCJvd25lciIsInVzZXJJZCIsIl9uYW1lIiwiX2xpbmsiLCJfbGlrZXMiLCJfY2FyZElkIiwiX293bmVyIiwiX3VzZXIiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9vcGVuUG9wdXBXaXRoSW1hZ2UiLCJfb3BlblBvcHVwV2l0aFF1ZXN0aW9uIiwiX2xpa2VDYXJkcyIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJlbGVtZW50IiwiX2VsZW1lbnQiLCJpZCIsIl9saWtlIiwiY29udGFpbnMiLCJtZXRob2QiLCJpdGVtIiwiX2lkIiwiX2xpa2VDYXJkIiwiX2RlbGV0ZUNhcmQiLCJfem9vbUltYWdlIiwiX2dldFRlbXBsYXRlIiwiY2FyZEVsZW1lbnRJbWFnZSIsImFsdCIsInNyYyIsImxlbmd0aCIsIl9jaGVja0xpa2VzIiwiX3NldENhcmRMaXN0ZW5lcnMiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtcyIsInByZXBlbmQiLCJhcHBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5IiwiY2xvc2UiLCJldnQiLCJrZXkiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlUG9wdXBVcmwiLCJfaW1hZ2VQb3B1cENhcHRpb24iLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Rm9ybSIsIl9oYW5kbGVTdWJtaXRGb3JtIiwiX3BvcHVwRm9ybSIsIl9idXR0b24iLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImlzTG9hZGluZyIsInJlbmRlckxvYWRpbmciLCJfaXRlbXNWYWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoUXVlc3Rpb24iLCJVc2VySW5mbyIsIm5hbWVQcm9maWxlIiwiam9iUHJvZmlsZSIsIl9uYW1lUHJvZmlsZSIsIl9qb2JQcm9maWxlIiwiYWJvdXQiLCJpbnB1dFZhbHVlcyIsImFwaSIsInVybCIsImhlYWRlcnMiLCJfdXJsIiwiX2hlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXZhdGFyIiwidGl0bGUiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJjYXJkRGF0YSIsInVzZXJEYXRhIiwiY2FyZHMiLCJtYXAiLCJpbml0aWFsQ2FyZHNMaXN0IiwiY2FyZEVsZW1lbnQiLCJDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiYWRkSXRlbUFwcGVuZCIsInBvcHVwRWRpdFByb2ZpbGVWYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwicG9wdXBBZGRGb3JtVmFsaWRhdG9yIiwicG9wdXBBdmF0YXJGb3JtVmFsaWRhdG9yIiwiYXZhdGFyRWRpdExheWVyIiwiYXZhdGFyVXNlciIsInBvcHVwRWRpdFByb2ZpbGVPcGVuQnV0dG9uIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJ1c2VySW5mbyIsInBvcHVwRWRpdEZvcm0iLCJyZW5ld1VzZXJJbmZvIiwicmVzdWx0Iiwic2V0VXNlckluZm8iLCJmaW5hbGx5IiwiY2F0Y2giLCJlcnIiLCJhbGVydCIsInJlbmV3VXNlckF2YXRhciIsInpvb21JbWFnZSIsIm9wZW4iLCJkZWxldGVDYXJkIiwiZGVsZXRlRWxlbWVudCIsImlkRWxlbWVudCIsInRvZ2dsZSIsInBvcHVwT3BlbkJ1dHRvbkFkZEZvcm0iLCJjcmVhdGVOZXdDYXJkIiwiYWRkSXRlbVByZXBlbmQiLCJyZW5kZXJJdGVtcyIsImVuYWJsZVZhbGlkYXRpb24iLCJzZXRFdmVudExpc3RlbmVycyIsImNsZWFuSW5wdXRFcnJvcnMiLCJ1c2VyUHJvZmlsZSJdLCJtYXBwaW5ncyI6Im1CQUNBLElBQU1BLEVBQXVCLENBQzNCQyxjQUFlLG9CQUNmQyxxQkFBc0Isd0JBQ3RCQyxvQkFBcUIsZ0NBQ3JCQyxnQkFBaUIsOEJBQ2pCQyxXQUFZLDRCQUNaQyx5QkFBMEIsd0JBQzFCQyxhQUFjLHVCQUNkQyxnQkFBaUIsMkIsc0tDb0VuQixRLFdBNUVFLFdBQVlDLEVBQVlDLEksNEZBQWMsU0FDcENDLEtBQUtDLFlBQWNILEVBQ25CRSxLQUFLRSxjQUFnQkgsRUFDckJDLEtBQUtHLFdBQWFDLE1BQU1DLEtBQUtDLFNBQVNDLGNBQWNQLEtBQUtFLGVBQWVNLGlCQUFpQlIsS0FBS0MsWUFBWVgsZ0IsNkRBRzVGbUIsRUFBY0MsR0FDNUIsSUFBTUMsRUFBZUYsRUFBYUcsbUJBQ2xDRCxFQUFhRSxZQUFjSCxFQUMzQkMsRUFBYUcsVUFBVUMsSUFBSWYsS0FBS0MsWUFBWVAsWUFDNUNlLEVBQWFLLFVBQVVDLElBQUlmLEtBQUtDLFlBQVlSLG1CLHNDQUc5QmdCLEdBQ2QsSUFBTUUsRUFBZUYsRUFBYUcsbUJBQ2xDRCxFQUFhRSxZQUFjLEdBQzNCRixFQUFhRyxVQUFVRSxPQUFPaEIsS0FBS0MsWUFBWVAsWUFDL0NlLEVBQWFLLFVBQVVFLE9BQU9oQixLQUFLQyxZQUFZUixtQiwwQ0FHN0JnQixHQUVsQixHQUR5QkEsRUFBYVEsU0FBU0MsTUFLN0NsQixLQUFLbUIsZ0JBQWdCVixPQUpGLENBQ25CLElBQU1DLEVBQWVELEVBQWFXLGtCQUNsQ3BCLEtBQUtxQixnQkFBZ0JaLEVBQWNDLE0sdUNBTXRCWSxHQUNmLE9BQU9BLEVBQVVDLE1BQUssU0FBQ2QsR0FDckIsT0FBUUEsRUFBYVEsU0FBU0MsVyx5Q0FJZkksRUFBV0UsR0FDeEJ4QixLQUFLeUIsaUJBQWlCSCxJQUN4QkUsRUFBY1YsVUFBVUMsSUFBSWYsS0FBS0MsWUFBWVQscUJBQzdDZ0MsRUFBY0UsYUFBYSxZQUFZLEtBRXZDRixFQUFjVixVQUFVRSxPQUFPaEIsS0FBS0MsWUFBWVQscUJBQ2hEZ0MsRUFBY0csZ0JBQWdCLGUseUNBSWZDLEdBQWEsV0FDeEJKLEVBQWdCSSxFQUFZckIsY0FBY1AsS0FBS0MsWUFBWVYsc0JBRWpFUyxLQUFLNkIsbUJBQW1CN0IsS0FBS0csV0FBWXFCLEdBRXpDeEIsS0FBS0csV0FBVzJCLFNBQVEsU0FBQ3JCLEdBQ3ZCQSxFQUFhc0IsaUJBQWlCLFNBQVMsV0FDckMsRUFBS0Msb0JBQW9CdkIsR0FFekIsRUFBS29CLG1CQUFtQixFQUFLMUIsV0FBWXFCLFcseUNBSzVCLFdBQ2pCeEIsS0FBS0csV0FBVzJCLFNBQVEsU0FBQ3JCLEdBQ3ZCLEVBQUtVLGdCQUFnQlYsUSx5Q0FLdkIsSUFBTW1CLEVBQWN0QixTQUFTQyxjQUFjUCxLQUFLRSxlQUloRDBCLEVBQVlHLGlCQUFpQixVQUhILFNBQUNFLEdBQ3pCQSxFQUFNQyxvQkFHUmxDLEtBQUttQyxtQkFBbUJQLFEsNExDRTVCLFEsV0ExRUUsYUFBd0RRLEVBQWtCQyxFQUFvQkMsRUFBdUJDLEdBQVUsSUFBbEhDLEVBQWtILEVBQWxIQSxLQUFNQyxFQUE0RyxFQUE1R0EsS0FBTUMsRUFBc0csRUFBdEdBLE1BQU9DLEVBQStGLEVBQS9GQSxPQUFRQyxFQUF1RixFQUF2RkEsTUFBT0MsRUFBZ0YsRUFBaEZBLFEsNEZBQWdGLFNBQzdIN0MsS0FBSzhDLE1BQVFOLEVBQ2J4QyxLQUFLK0MsTUFBUU4sRUFDYnpDLEtBQUtnRCxPQUFTTixFQUNkMUMsS0FBS2lELFFBQVVOLEVBQ2YzQyxLQUFLa0QsT0FBU04sRUFDZDVDLEtBQUttRCxNQUFRTixFQUNiN0MsS0FBS29ELGtCQUFvQmhCLEVBQ3pCcEMsS0FBS3FELG9CQUFzQmhCLEVBQzNCckMsS0FBS3NELHVCQUF5QmhCLEVBQzlCdEMsS0FBS3VELFdBQWFoQixFLDREQUlsQixPQUFPakMsU0FBU0MsY0FBY1AsS0FBS29ELG1CQUFtQkksUUFBUWpELGNBQWMsZ0JBQWdCa0QsV0FBVSxLLG1DQUl0R3pELEtBQUtxRCxvQkFBb0IsQ0FDdkJiLEtBQU14QyxLQUFLOEMsTUFDWEwsS0FBTXpDLEtBQUsrQyxVLG9DQUliL0MsS0FBS3NELHVCQUF1QixDQUMxQkksUUFBUzFELEtBQUsyRCxTQUNkQyxHQUFJNUQsS0FBS2lELFksa0NBSVhqRCxLQUFLNkQsTUFBUTdELEtBQUsyRCxTQUFTcEQsY0FBYyxnQkFDckNQLEtBQUs2RCxNQUFNL0MsVUFBVWdELFNBQVMsc0JBQ2hDOUQsS0FBS3VELFdBQVcsQ0FDZEcsUUFBUzFELEtBQUsyRCxTQUNkaEIsT0FBUTNDLEtBQUtpRCxRQUNiYyxPQUFRLFdBRVYvRCxLQUFLdUQsV0FBVyxDQUNkRyxRQUFTMUQsS0FBSzJELFNBQ2RoQixPQUFRM0MsS0FBS2lELFFBQ2JjLE9BQVEsVSxvQ0FJQSxXQUNSL0QsS0FBS2dELE9BQU96QixNQUFLLFNBQUF5QyxHQUFJLE9BQUlBLEVBQUtDLE1BQVEsRUFBS2QsVUFDN0NuRCxLQUFLMkQsU0FBU3BELGNBQWMsZ0JBQWdCTyxVQUFVQyxJQUFJLHdCLDBDQUkxQyxXQUNsQmYsS0FBSzJELFNBQVNwRCxjQUFjLGdCQUFnQndCLGlCQUFpQixTQUFTLFdBQVEsRUFBS21DLGVBQ25GbEUsS0FBSzJELFNBQVNwRCxjQUFjLGtCQUFrQndCLGlCQUFpQixTQUFTLFdBQVEsRUFBS29DLGlCQUNyRm5FLEtBQUsyRCxTQUFTcEQsY0FBYyxpQkFBaUJ3QixpQkFBaUIsU0FBUyxXQUFRLEVBQUtxQyxrQixxQ0FJcEZwRSxLQUFLMkQsU0FBVzNELEtBQUtxRSxlQUNyQixJQUFNQyxFQUFtQnRFLEtBQUsyRCxTQUFTcEQsY0FBYyxpQkFPckQsT0FOQStELEVBQWlCQyxJQUFNdkUsS0FBSzhDLE1BQzVCd0IsRUFBaUJFLElBQU14RSxLQUFLK0MsTUFDNUIvQyxLQUFLMkQsU0FBU3BELGNBQWMsZ0JBQWdCTSxZQUFjYixLQUFLOEMsTUFDL0Q5QyxLQUFLMkQsU0FBU3BELGNBQWMsbUJBQW1CTSxZQUFjYixLQUFLZ0QsT0FBT3lCLE9BQ3pFekUsS0FBSzBFLGNBQ0wxRSxLQUFLMkUsb0JBQ0QzRSxLQUFLa0QsUUFBVWxELEtBQUttRCxPQUN0Qm5ELEtBQUsyRCxTQUFTcEQsY0FBYyxrQkFBa0JPLFVBQVVDLElBQUksMEJBQ3JEZixLQUFLMkQsVUFFTDNELEtBQUsyRCxjLGdNQ3RFR2lCLEUsV0FDbkIsYUFBd0JDLEdBQW1CLElBQTlCQyxFQUE4QixFQUE5QkEsVSw0RkFBOEIsU0FDekM5RSxLQUFLK0UsVUFBWUQsRUFDakI5RSxLQUFLZ0YsV0FBYTFFLFNBQVNDLGNBQWNzRSxHLHlEQUcvQkksRSxHQUFpQixXQUFUcEMsRUFBUyxFQUFUQSxPQUNsQm9DLEVBQU1uRCxTQUFRLFlBQXdDLElBQXRDVSxFQUFzQyxFQUF0Q0EsS0FBTUMsRUFBZ0MsRUFBaENBLEtBQU1DLEVBQTBCLEVBQTFCQSxNQUFPQyxFQUFtQixFQUFuQkEsT0FBUUMsRUFBVyxFQUFYQSxNQUN6QyxFQUFLbUMsVUFBVSxDQUFDdkMsT0FBTUMsT0FBTUMsUUFBT0MsU0FBUUMsUUFBT0MsZ0IscUNBSXZDYSxHQUNiMUQsS0FBS2dGLFdBQVdFLFFBQVF4QixLLG9DQUdaQSxHQUNaMUQsS0FBS2dGLFdBQVdHLE9BQU96QixRLDRMQ2pCM0IsSUFFcUIwQixFLFdBQ25CLFdBQVlDLEksNEZBQWUsU0FDekJyRixLQUFLc0YsT0FBU2hGLFNBQVNDLGNBQWM4RSxHQUNyQ3JGLEtBQUt1RixnQkFBa0J2RixLQUFLdUYsZ0JBQWdCQyxLQUFLeEYsTUFDakRBLEtBQUt5Riw0QkFBOEJ6RixLQUFLeUYsNEJBQTRCRCxLQUFLeEYsTUFDekVBLEtBQUswRixNQUFRMUYsS0FBSzBGLE1BQU1GLEtBQUt4RixNLDZEQUdmMkYsR0FWQSxXQVdWQSxFQUFJQyxLQUNONUYsS0FBSzBGLFUsa0RBSW1CQyxHQUN0QkEsRUFBSUUsU0FBV0YsRUFBSUcsZUFDckI5RixLQUFLMEYsVSw2QkFLUDFGLEtBQUtzRixPQUFPeEUsVUFBVUMsSUFBSSxnQkFDMUJULFNBQVN5QixpQkFBaUIsUUFBUy9CLEtBQUt1RixtQiw4QkFJeEN2RixLQUFLc0YsT0FBT3hFLFVBQVVFLE9BQU8sZ0JBQzdCVixTQUFTeUYsb0JBQW9CLFFBQVMvRixLQUFLdUYsbUIsMENBSTNDdkYsS0FBS3NGLE9BQU8vRSxjQUFjLHdCQUF3QndCLGlCQUFpQixRQUFTL0IsS0FBSzBGLE9BQ2pGMUYsS0FBS3NGLE9BQU92RCxpQkFBaUIsVUFBVy9CLEtBQUt5RixrQyx3bUNDaEM1Qk8sRSxrcEJBQ25CLFdBQVlYLEdBQWUsYSw0RkFBQSxVQUN6QixjQUFNQSxJQUNEWSxlQUFpQixFQUFLWCxPQUFPL0UsY0FBYyxpQkFDaEQsRUFBSzJGLG1CQUFxQixFQUFLWixPQUFPL0UsY0FBYyxtQkFIM0IsRSw2Q0FNUixJQUFiaUMsRUFBYSxFQUFiQSxLQUFNQyxFQUFPLEVBQVBBLEtBQ1Z6QyxLQUFLaUcsZUFBZXpCLElBQU0vQixFQUMxQnpDLEtBQUtpRyxlQUFlMUIsSUFBTS9CLEVBQzFCeEMsS0FBS2tHLG1CQUFtQnJGLFlBQWMyQixFQUN0Qyw4QyxvQkFYd0M0QyxHLGtsQ0NBdkJlLEUsa3BCQUNuQixjQUFpRCxNQUFuQ2QsRUFBbUMsRUFBbkNBLGNBQWVlLEVBQW9CLEVBQXBCQSxpQkFBb0IsTyw0RkFBQSxVQUMvQyxjQUFNZixJQUNEZ0Isa0JBQW9CRCxFQUN6QixFQUFLRSxXQUFhLEVBQUtoQixPQUFPL0UsY0FBYyxnQkFDNUMsRUFBS0osV0FBYSxFQUFLbUcsV0FBVzlGLGlCQUFpQixxQkFDbkQsRUFBSytGLFFBQVUsRUFBS0QsV0FBVy9GLGNBQWMseUJBTEUsRSx1REFTL0MsSUFBTWlHLEVBQWEsR0FJbkIsT0FIQXhHLEtBQUtHLFdBQVcyQixTQUFRLFNBQUEyRSxHQUNwQkQsRUFBV0MsRUFBTWpFLE1BQVFpRSxFQUFNQyxTQUU1QkYsSSxvQ0FHS0csR0FFVjNHLEtBQUt1RyxRQUFRMUYsWUFEWDhGLEVBQ3lCLGdCQUVBLGMsMENBSVgsV0FDbEIsc0RBQ0EzRyxLQUFLc0csV0FBV3ZFLGlCQUFpQixVQUFVLFNBQUM0RCxHQUMxQ0EsRUFBSXpELGlCQUNKLEVBQUswRSxlQUFjLEdBQ25CLEVBQUtDLFlBQWMsRUFBS0Msa0JBQ3hCLEVBQUtULGtCQUFrQixFQUFLUSxrQiw4QkFLOUIsMENBQ0E3RyxLQUFLc0csV0FBV1MsYSxvQkFyQ3VCM0IsRyxrbENDQXRCNEIsRSxrcEJBQ25CLGNBQWlELE1BQW5DM0IsRUFBbUMsRUFBbkNBLGNBQWVlLEVBQW9CLEVBQXBCQSxpQkFBb0IsTyw0RkFBQSxVQUMvQyxjQUFNZixJQUNEZ0Isa0JBQW9CRCxFQUN6QixFQUFLRSxXQUFhLEVBQUtoQixPQUFPL0UsY0FBYyxnQkFIRyxFLHlEQU03QixXQUNsQixzREFDQVAsS0FBS3NHLFdBQVd2RSxpQkFBaUIsVUFBVSxTQUFDNEQsR0FDMUNBLEVBQUl6RCxpQkFDSixFQUFLbUUsa0JBQWtCLENBQUMzQyxRQUFTLEVBQUtDLFNBQVVDLEdBQUksRUFBS0ssVyw4QkFJekMsSUFBZFAsRUFBYyxFQUFkQSxRQUFTRSxFQUFLLEVBQUxBLEdBQ2I1RCxLQUFLMkQsU0FBV0QsRUFDaEIxRCxLQUFLaUUsSUFBTUwsRUFDWCw4QyxvQkFsQjJDd0IsRywwS0NGMUI2QixFLFdBQ25CLGNBQXlDLElBQTNCQyxFQUEyQixFQUEzQkEsWUFBYUMsRUFBYyxFQUFkQSxZLDRGQUFjLFNBQ3ZDbkgsS0FBS29ILGFBQWU5RyxTQUFTQyxjQUFjMkcsR0FDM0NsSCxLQUFLcUgsWUFBYy9HLFNBQVNDLGNBQWM0RyxHLDJEQVcxQyxNQUxnQixDQUNkM0UsS0FIV3hDLEtBQUtvSCxhQUFhdkcsWUFJN0J5RyxNQUhVdEgsS0FBS3FILFlBQVl4RyxlLGtDQVNuQjBHLEdBQ1Z2SCxLQUFLb0gsYUFBYXZHLFlBQWMwRyxFQUFZL0UsS0FDNUN4QyxLQUFLcUgsWUFBWXhHLFlBQWMwRyxFQUFZRCxXLHNTQ04vQyxJQUFNRSxFQUFNLEksV0NaVixjQUE0QixJQUFmQyxFQUFlLEVBQWZBLElBQUtDLEVBQVUsRUFBVkEsUyw0RkFBVSxTQUMxQjFILEtBQUsySCxLQUFPRixFQUNaekgsS0FBSzRILFNBQVdGLEUsMkRBSWhCLE9BQU9HLE1BQU0sR0FBRCxPQUFJN0gsS0FBSzJILEtBQVQsYUFBMEIsQ0FDcEM1RCxPQUFRLE1BQ1IyRCxRQUFTMUgsS0FBSzRILFdBRWZFLE1BQUssU0FBQUMsR0FDSixPQUFLQSxFQUFJQyxHQUlGRCxFQUFJRSxPQUZGQyxRQUFRQyxPQUFSLGtCQUEwQkosRUFBSUssWUFJeENOLE1BQUssU0FBQ08sR0FDTCxPQUFPQSxPLG9DQUlHZCxHQUNaLE9BQU9NLE1BQU0sR0FBRCxPQUFJN0gsS0FBSzJILEtBQVQsYUFBMEIsQ0FDcEM1RCxPQUFRLFFBQ1IyRCxRQUFTMUgsS0FBSzRILFNBQ2RVLEtBQU1DLEtBQUtDLFVBQVUsQ0FBQ2hHLEtBQU0rRSxFQUFZL0UsS0FBTThFLE1BQU9DLEVBQVlELFVBRWxFUSxNQUFLLFNBQUFDLEdBQ0osT0FBS0EsRUFBSUMsR0FHRkQsRUFBSUUsT0FGRkMsUUFBUUMsT0FBUixrQkFBMEJKLEVBQUlLLFlBSXhDTixNQUFLLFNBQUNPLEdBQ0wsT0FBT0EsTyxzQ0FJS2QsR0FDZCxPQUFPTSxNQUFNLEdBQUQsT0FBSTdILEtBQUsySCxLQUFULG9CQUFpQyxDQUMzQzVELE9BQVEsUUFDUjJELFFBQVMxSCxLQUFLNEgsU0FDZFUsS0FBTUMsS0FBS0MsVUFBVSxDQUFDQyxPQUFRbEIsRUFBWWtCLFdBRTNDWCxNQUFLLFNBQUFDLEdBQ0osT0FBS0EsRUFBSUMsR0FHRkQsRUFBSUUsT0FGRkMsUUFBUUMsT0FBUixrQkFBMEJKLEVBQUlLLFlBSXhDTixNQUFLLFNBQUNPLEdBQ0wsT0FBT0EsTyx3Q0FLVCxPQUFPUixNQUFNLEdBQUQsT0FBSTdILEtBQUsySCxLQUFULFVBQXVCLENBQ2pDNUQsT0FBUSxNQUNSMkQsUUFBUzFILEtBQUs0SCxXQUVmRSxNQUFLLFNBQUFDLEdBQ0osT0FBS0EsRUFBSUMsR0FHRkQsRUFBSUUsT0FGRkMsUUFBUUMsT0FBUixrQkFBMEJKLEVBQUlLLFlBSXhDTixNQUFLLFNBQUNPLEdBQ0wsT0FBT0EsTyxvQ0FJR2QsR0FDWixPQUFPTSxNQUFNLEdBQUQsT0FBSTdILEtBQUsySCxLQUFULFVBQXVCLENBQ2pDNUQsT0FBUSxPQUNSMkQsUUFBUzFILEtBQUs0SCxTQUNkVSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CaEcsS0FBTStFLEVBQVltQixNQUNsQmpHLEtBQU04RSxFQUFZRSxRQUdyQkssTUFBSyxTQUFBQyxHQUNKLE9BQUtBLEVBQUlDLEdBR0ZELEVBQUlFLE9BRkZDLFFBQVFDLE9BQVIsa0JBQTBCSixFQUFJSyxZQUl4Q04sTUFBSyxTQUFDTyxHQUNMLE9BQU9BLE8saUNBSUExRixHQUNULE9BQU9rRixNQUFNLEdBQUQsT0FBSTdILEtBQUsySCxLQUFULGtCQUF1QmhGLEdBQVUsQ0FDM0NvQixPQUFRLFNBQ1IyRCxRQUFTMUgsS0FBSzRILFdBRWZFLE1BQUssU0FBQUMsR0FDSixPQUFLQSxFQUFJQyxHQUdGRCxFQUFJRSxPQUZGQyxRQUFRQyxPQUFSLGtCQUEwQkosRUFBSUssWUFJeENOLE1BQUssU0FBQ08sR0FDTCxPQUFPQSxPLCtCQUlGMUYsRUFBUW9CLEdBQ2YsT0FBTzhELE1BQU0sR0FBRCxPQUFJN0gsS0FBSzJILEtBQVQsd0JBQTZCaEYsR0FBVSxDQUNqRG9CLE9BQVFBLEVBQ1IyRCxRQUFTMUgsS0FBSzRILFdBRWZFLE1BQUssU0FBQUMsR0FDSixPQUFLQSxFQUFJQyxHQUdGRCxFQUFJRSxPQUZGQyxRQUFRQyxPQUFSLGtCQUEwQkosRUFBSUssWUFJeENOLE1BQUssU0FBQ08sR0FDTCxPQUFPQSxVLHNCRDVHRCxDQUFRLENBQ2xCWixJQUFLLDhDQUNMQyxRQUFTLENBQ1BpQixjQUFlLHVDQUNmLGVBQWdCLHNCQU1wQlQsUUFBUVUsSUFBSSxDQUFDcEIsRUFBSXFCLGtCQUFtQnJCLEVBQUlzQixnQkFDckNoQixNQUFLLFlBQTBCLEksSUFBQSxHLEVBQUEsRSw0Q0FBQSxJLG93QkFBeEJpQixFQUF3QixLQUFkQyxFQUFjLE1BQzlCLFdBQ0UsSUFBTUMsRUFBUUYsRUFBU0csS0FBSSxTQUFBbEYsR0FDekIsTUFBTyxDQUNMeEIsS0FBTXdCLEVBQUt4QixLQUNYQyxLQUFNdUIsRUFBS3ZCLEtBQ1hDLE1BQU9zQixFQUFLdEIsTUFDWkMsT0FBUXFCLEVBQUtDLElBQ2JyQixNQUFPb0IsRUFBS3BCLE1BQU1xQixRQUtoQmtGLEVBQW1CLElBQUl2RSxFQUFTLENBQ3BDRSxTQUFVLFlBQWdELElBQTlDdEMsRUFBOEMsRUFBOUNBLEtBQU1DLEVBQXdDLEVBQXhDQSxLQUFNQyxFQUFrQyxFQUFsQ0EsTUFBT0MsRUFBMkIsRUFBM0JBLE9BQVFDLEVBQW1CLEVBQW5CQSxNQUFPQyxFQUFZLEVBQVpBLE9BRXRDdUcsRUFETyxJQUFJQyxFQUFLLENBQUM3RyxPQUFNQyxPQUFNQyxRQUFPQyxTQUFRQyxRQUFPQyxVQUFTLGlCQUFrQlIsRUFBb0JDLEVBQXVCQyxHQUN0RytHLGVBQ3pCSCxFQUFpQkksY0FBY0gsS0FFaEMsVUFHR0ksRUFBNEIsSUFBSUMsRUFBY3BLLEVBQXNCQSxFQUFxQk0sMEJBQ3pGK0osRUFBd0IsSUFBSUQsRUFBY3BLLEVBQXNCQSxFQUFxQk8sY0FDckYrSixFQUEyQixJQUFJRixFQUFjcEssRUFBc0JBLEVBQXFCUSxpQkFJeEYrSixFQUFrQnRKLFNBQVNDLGNBQWMscUJBQ3pDc0osRUFBYXZKLFNBQVNDLGNBQWMsb0JBQ3BDdUosRUFBNkJ4SixTQUFTQyxjQUFjLHlCQUNwRHdKLEVBQVl6SixTQUFTQyxjQUFjLHFDQUNuQ3lKLEVBQVcxSixTQUFTQyxjQUFjLG9DQUVsQzBKLEVBQVcsSUFBSWhELEVBQVMsQ0FBRUMsWUFBWSxpQkFBa0JDLFdBQVksa0JBR3BFK0MsRUFBZ0IsSUFBSS9ELEVBQWMsQ0FDdENkLGNBQWUsd0JBQ2ZlLGlCQUFrQixTQUFDbUIsR0FDakJDLEVBQUkyQyxjQUFjNUMsR0FDZk8sTUFBSyxTQUFDc0MsR0FDTEgsRUFBU0ksWUFBWUQsR0FDckJGLEVBQWN4RSxXQUVmNEUsU0FBUyxXQUNSSixFQUFjdEQsZUFBYyxNQUU3QjJELE9BQU0sU0FBQUMsR0FDTEMsTUFBTUQsU0FNUjNLLEVBQWtCLElBQUlzRyxFQUFjLENBQ3hDZCxjQUFlLDBCQUNmZSxpQkFBa0IsU0FBQ21CLEdBQ2pCQyxFQUFJa0QsZ0JBQWdCbkQsR0FDakJPLE1BQUssU0FBQ3NDLEdBQ0xQLEVBQVdyRixJQUFNNEYsRUFBTzNCLE9BQ3hCNUksRUFBZ0I2RixXQUVqQjRFLFNBQVMsV0FDUnpLLEVBQWdCK0csZUFBYyxNQUUvQjJELE9BQU0sU0FBQUMsR0FDTEMsTUFBTUQsU0FPUkcsRUFBWSxJQUFJM0UsRUFBZSwwQkFFckMsU0FBUzNELEVBQVQsR0FBeUMsSUFBWkcsRUFBWSxFQUFaQSxLQUFLQyxFQUFPLEVBQVBBLEtBQ2hDa0ksRUFBVUMsS0FBSyxDQUFDcEksT0FBS0MsU0FJdkIsSUFBTW9JLEVBQWEsSUFBSTdELEVBQWtCLENBQ3ZDM0IsY0FBZSx1QkFDZmUsaUJBQWtCLFlBQW1CLElBQWpCMUMsRUFBaUIsRUFBakJBLFFBQVNFLEVBQVEsRUFBUkEsR0FDckJrSCxFQUFnQnBILEVBQ2hCcUgsRUFBWW5ILEVBQ2xCNEQsRUFBSXFELFdBQVdFLEdBQ1ZqRCxNQUFLLFNBQUNzQyxHQUNMVSxFQUFjOUosU0FDZDZKLEVBQVduRixXQUVaNkUsT0FBTSxTQUFBQyxHQUNMQyxNQUFNRCxTQUtoQixTQUFTbEksRUFBVCxHQUE4QyxJQUFkb0IsRUFBYyxFQUFkQSxRQUFTRSxFQUFLLEVBQUxBLEdBQ3ZDaUgsRUFBV0QsS0FBSyxDQUFDbEgsVUFBU0UsT0FJNUIsU0FBU3JCLEVBQVQsR0FBNkMsSUFBMUJtQixFQUEwQixFQUExQkEsUUFBU2YsRUFBaUIsRUFBakJBLE9BQVFvQixFQUFTLEVBQVRBLE9BQ2xDeUQsRUFBSWpGLFNBQVNJLEVBQVFvQixHQUNsQitELE1BQUssU0FBQ3NDLEdBQ0wxRyxFQUFRbkQsY0FBYyxnQkFBZ0JPLFVBQVVrSyxPQUFPLHNCQUN2RHRILEVBQVFuRCxjQUFjLG1CQUFtQk0sWUFBY3VKLEVBQU8xSCxNQUFNK0IsVUFFckU4RixPQUFNLFNBQUFDLEdBQ0xDLE1BQU1ELE1BTVosSUFBTVMsRUFBeUIzSyxTQUFTQyxjQUFjLHdCQUVoRFgsRUFBZSxJQUFJdUcsRUFBYyxDQUNyQ2QsY0FBZSx1QkFDZmUsaUJBQWtCLFNBQUNtQixHQUNqQkMsRUFBSTBELGNBQWMzRCxHQUNmTyxNQUFLLFNBQUNzQyxHQUNMLElBT01oQixFQVBPLElBQUlDLEVBQUssQ0FDcEI3RyxLQUFNNEgsRUFBTzVILEtBQ2JDLEtBQU0ySCxFQUFPM0gsS0FDYkMsTUFBTzBILEVBQU8xSCxNQUNkQyxPQUFReUgsRUFBT25HLElBQ2ZyQixNQUFPd0gsRUFBT3hILE1BQU1xQixJQUNwQnBCLE9BQVFtRyxFQUFTL0UsS0FBTSxpQkFBa0I1QixFQUFvQkMsRUFBdUJDLEdBQzdEK0csZUFDekJILEVBQWlCZ0MsZUFBZS9CLEdBQ2hDeEosRUFBYThGLFdBRWQ0RSxTQUFTLFdBQ1IxSyxFQUFhZ0gsZUFBYyxNQUU1QjJELE9BQU0sU0FBQUMsR0FDTEMsTUFBTUQsU0FNZHJCLEVBQWlCaUMsWUFBWW5DLEVBQU8sQ0FBQ3BHLE9BQVFtRyxFQUFTL0UsTUFDdERnRyxFQUFTSSxZQUFZckIsR0FDckJhLEVBQVdyRixJQUFNd0UsRUFBU1AsT0FHMUJlLEVBQTBCNkIsbUJBQzFCM0IsRUFBc0IyQixtQkFDdEIxQixFQUF5QjBCLG1CQUd6QlYsRUFBVVcsb0JBQ1ZULEVBQVdTLG9CQUdYMUwsRUFBYTBMLG9CQUNiTCxFQUF1QmxKLGlCQUFpQixTQUFTLFdBQy9DMkgsRUFBc0I2QixtQkFDdEIzTCxFQUFhZ0wsVUFJZlYsRUFBY29CLG9CQUNkekwsRUFBZ0J5TCxvQkFFaEJ4QixFQUEyQi9ILGlCQUFpQixTQUFTLFdBQ25ELElBQU15SixFQUFjdkIsRUFBU25CLGNBQzdCaUIsRUFBVXJELE1BQVE4RSxFQUFZaEosS0FDOUJ3SCxFQUFTdEQsTUFBUThFLEVBQVlsRSxNQUM3QmtDLEVBQTBCK0IsbUJBQzFCckIsRUFBY1UsVUFHaEJoQixFQUFnQjdILGlCQUFpQixTQUFTLFdBQ3hDNEgsRUFBeUI0QixtQkFDekIxTCxFQUFnQitLLFVBaExwQixNQXFMREwsT0FBTSxTQUFBQyxHQUNMQyxNQUFNRCxPIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyDQpNC+0YDQvNGLIC0tINCf0LDRgNCw0LzQtdGC0YDRiyDQtNC70Y8g0LLQsNC70LjQtNCw0YLQvtGA0LBcbmNvbnN0IHBhcmFtZXRlcnNWYWxpZGF0aW9uID0ge1xuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19mb3JtLWl0ZW0nLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19mb3JtLWl0ZW1fdHlwZV9lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3ItdGV4dF92aXNpYmxlJyxcbiAgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfZWRpdC1mb3JtJyxcbiAgcG9wdXBBZGRGb3JtOiAnLnBvcHVwX3R5cGVfYWRkLWZvcm0nLFxuICBwb3B1cEF2YXRhckZvcm06ICcucG9wdXBfdHlwZV9hdmF0YXItZm9ybSdcbn1cblxuZXhwb3J0IHsgcGFyYW1ldGVyc1ZhbGlkYXRpb24gfTtcblxuXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IocGFyYW1ldGVycywgZm9ybVNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcGFyYW1ldGVycyA9IHBhcmFtZXRlcnM7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtU2VsZWN0b3IpLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fcGFyYW1ldGVycy5pbnB1dFNlbGVjdG9yKSk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBpbnB1dEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9wYXJhbWV0ZXJzLmVycm9yQ2xhc3MpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3BhcmFtZXRlcnMuaW5wdXRFcnJvckNsYXNzKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gaW5wdXRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZztcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3BhcmFtZXRlcnMuZXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fcGFyYW1ldGVycy5pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBpc0lucHV0Tm90VmFsaWQgPSAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIGlmIChpc0lucHV0Tm90VmFsaWQpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH0gXG4gIFxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fcGFyYW1ldGVycy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9wYXJhbWV0ZXJzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQpIHtcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wYXJhbWV0ZXJzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICAvLyDQvtCx0L3Rg9C70Y/QtdC8INC60L3QvtC/0LrRgyDQv9GA0Lgg0LfQsNC/0YPRgdC60LVcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xuICBcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAvLyDRh9GC0L7QsdGLINC/0YDQvtCy0LXRgNGP0YLRjCDQtdCz0L4g0L/RgNC4INC40LfQvNC10L3QtdC90LjQuCDQu9GO0LHQvtCz0L4g0LjQtyDQv9C+0LvQtdC5XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBjbGVhbklucHV0RXJyb3JzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIGNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtU2VsZWN0b3IpO1xuICAgIGNvbnN0IHN1Ym1pdEZvcm1IYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgc3VibWl0Rm9ybUhhbmRsZXIpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50KTsgXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7IiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHtuYW1lLCBsaW5rLCBsaWtlcywgY2FyZElkLCBvd25lciwgdXNlcklkfSwgdGVtcGxhdGVTZWxlY3Rvciwgb3BlblBvcHVwV2l0aEltYWdlLCBvcGVuUG9wdXBXaXRoUXVlc3Rpb24sIGxpa2VDYXJkKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkSWQ7XG4gICAgdGhpcy5fb3duZXIgPSBvd25lcjtcbiAgICB0aGlzLl91c2VyID0gdXNlcklkO1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX29wZW5Qb3B1cFdpdGhJbWFnZSA9IG9wZW5Qb3B1cFdpdGhJbWFnZTtcbiAgICB0aGlzLl9vcGVuUG9wdXBXaXRoUXVlc3Rpb24gPSBvcGVuUG9wdXBXaXRoUXVlc3Rpb247XG4gICAgdGhpcy5fbGlrZUNhcmRzID0gbGlrZUNhcmQ7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2l0ZW0nKS5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cbiAgXG4gIF96b29tSW1hZ2UoKSB7XG4gICAgdGhpcy5fb3BlblBvcHVwV2l0aEltYWdlKHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUsIFxuICAgICAgbGluazogdGhpcy5fbGlua30pO1xuICB9XG5cbiAgX2RlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fb3BlblBvcHVwV2l0aFF1ZXN0aW9uKHtcbiAgICAgIGVsZW1lbnQ6IHRoaXMuX2VsZW1lbnQsXG4gICAgICBpZDogdGhpcy5fY2FyZElkfSk7XG4gIH1cbiAgXG4gIF9saWtlQ2FyZCgpIHtcbiAgICB0aGlzLl9saWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2xpa2UnKTtcbiAgICBpZiAodGhpcy5fbGlrZS5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmRzX19saWtlX2FjdGl2ZScpKSB7XG4gICAgICB0aGlzLl9saWtlQ2FyZHMoe1xuICAgICAgICBlbGVtZW50OiB0aGlzLl9lbGVtZW50LCBcbiAgICAgICAgY2FyZElkOiB0aGlzLl9jYXJkSWQsIFxuICAgICAgICBtZXRob2Q6ICdERUxFVEUnfSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUNhcmRzKHtcbiAgICAgICAgZWxlbWVudDogdGhpcy5fZWxlbWVudCwgXG4gICAgICAgIGNhcmRJZDogdGhpcy5fY2FyZElkLCBcbiAgICAgICAgbWV0aG9kOiAnUFVUJ30pXG4gICAgfVxuICB9XG5cbiAgX2NoZWNrTGlrZXMoKSB7XG4gICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoaXRlbSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fdXNlcikpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19saWtlJykuY2xhc3NMaXN0LmFkZCgnY2FyZHNfX2xpa2VfYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgX3NldENhcmRMaXN0ZW5lcnMoKSB7ICBcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fbGlrZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0aGlzLl9saWtlQ2FyZCAoKTsgfSk7ICBcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fZGVsZXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IHRoaXMuX2RlbGV0ZUNhcmQoKTsgfSk7ICBcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19faW1hZ2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgdGhpcy5fem9vbUltYWdlKCk7IH0pO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIGNvbnN0IGNhcmRFbGVtZW50SW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19faW1hZ2UnKTtcbiAgICBjYXJkRWxlbWVudEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgY2FyZEVsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX190ZXh0JykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19jb3VudGVyJykudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgdGhpcy5fY2hlY2tMaWtlcygpO1xuICAgIHRoaXMuX3NldENhcmRMaXN0ZW5lcnMoKTtcbiAgICBpZiAodGhpcy5fb3duZXIgIT0gdGhpcy5fdXNlcikge1xuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2RlbGV0ZScpLmNsYXNzTGlzdC5hZGQoJ2NhcmRzX19kZWxldGVfZGlzYWJsZWQnKTtcbiAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9ICBcbiAgfSAgXG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zLCB7dXNlcklkfSkge1xuICAgIGl0ZW1zLmZvckVhY2goKHtuYW1lLCBsaW5rLCBsaWtlcywgY2FyZElkLCBvd25lcn0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKHtuYW1lLCBsaW5rLCBsaWtlcywgY2FyZElkLCBvd25lciwgdXNlcklkfSlcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW1QcmVwZW5kKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIGFkZEl0ZW1BcHBlbmQoZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gIH1cbiAgXG59XG5cblxuIiwiY29uc3QgYnV0dG9uRXNjID0gJ0VzY2FwZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9jbG9zZVBvcHVwQnlDbGlja09uT3ZlcmxheSA9IHRoaXMuX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5LmJpbmQodGhpcylcbiAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpXG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IGJ1dHRvbkVzYykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9jbG9zZVBvcHVwQnlDbGlja09uT3ZlcmxheShldnQpIHtcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZSk7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2Nsb3NlUG9wdXBCeUNsaWNrT25PdmVybGF5KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlUG9wdXBVcmwgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG4gICAgdGhpcy5faW1hZ2VQb3B1cENhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKTtcbiAgfVxuXG4gIG9wZW4oe25hbWUsIGxpbmt9KSB7XG4gICAgdGhpcy5faW1hZ2VQb3B1cFVybC5zcmMgPSBsaW5rXG4gICAgdGhpcy5faW1hZ2VQb3B1cFVybC5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX2ltYWdlUG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtIH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtID0gaGFuZGxlU3VibWl0Rm9ybTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19mb3JtLWl0ZW0nKTtcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdWJtaXQtYnV0dG9uJyk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtVmFsdWVzO1xuICB9XG5cbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnXG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgICB0aGlzLl9pdGVtc1ZhbHVlID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0odGhpcy5faXRlbXNWYWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aFF1ZXN0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZvcm0gfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0gPSBoYW5kbGVTdWJtaXRGb3JtO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtKHtlbGVtZW50OiB0aGlzLl9lbGVtZW50LCBpZDogdGhpcy5faWR9KTtcbiAgICB9KTtcbiAgfVxuXG4gIG9wZW4oe2VsZW1lbnQsIGlkfSkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG5cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoIHtuYW1lUHJvZmlsZSwgam9iUHJvZmlsZX0gKSB7XG4gICAgdGhpcy5fbmFtZVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVQcm9maWxlKTtcbiAgICB0aGlzLl9qb2JQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JQcm9maWxlKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLl9uYW1lUHJvZmlsZS50ZXh0Q29udGVudDtcbiAgICBjb25zdCBqb2IgPSB0aGlzLl9qb2JQcm9maWxlLnRleHRDb250ZW50O1xuICAgIGNvbnN0IHByb2ZpbGUgPSB7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgYWJvdXQ6IGpvYlxuICAgIH1cblxuICAgIHJldHVybiBwcm9maWxlO1xuICB9XG5cbiAgc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpIHtcbiAgICB0aGlzLl9uYW1lUHJvZmlsZS50ZXh0Q29udGVudCA9IGlucHV0VmFsdWVzLm5hbWU7XG4gICAgdGhpcy5fam9iUHJvZmlsZS50ZXh0Q29udGVudCA9IGlucHV0VmFsdWVzLmFib3V0O1xuICB9XG59XG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcblxuaW1wb3J0IHsgcGFyYW1ldGVyc1ZhbGlkYXRpb24gfSBmcm9tICcuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cFdpdGhRdWVzdGlvbiBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoUXVlc3Rpb24uanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL3NjcmlwdHMvdXRpbHMvQXBpLmpzJztcblxuLy8g0JDQv9C4IC0g0LLRi9C30YvQstCw0LXQvCDRgdC10YDQstC10YBcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICB1cmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTE3JyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc0ZjdjYmFlZS04ZWNhLTQ1NmMtYjJiNi01M2IxOGEyNzgzMzUnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7IFxuXG5cbi8vINCS0YvQt9GL0LLQsNC10Lwg0L/QtdGA0LLQvtC90LDRh9Cw0LvRjNC90YvQtSDQtNCw0L3QvdGL0LUg0YEg0YHQtdGA0LLQtdGA0LBcblByb21pc2UuYWxsKFthcGkuZ2V0SW5pdGlhbENhcmRzKCksIGFwaS5nZXRVc2VySW5mbygpXSlcbiAgLnRoZW4oKFtjYXJkRGF0YSwgdXNlckRhdGFdKSA9PiB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGNhcmRzID0gY2FyZERhdGEubWFwKGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICBsaW5rOiBpdGVtLmxpbmssXG4gICAgICAgICAgbGlrZXM6IGl0ZW0ubGlrZXMsXG4gICAgICAgICAgY2FyZElkOiBpdGVtLl9pZCxcbiAgICAgICAgICBvd25lcjogaXRlbS5vd25lci5faWRcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLy8g0KDQsNC30LzQtdGC0LrQsCDQtNC70Y8g0LLRi9Cy0L7QtNCwINC60LDRgNGC0L7Rh9C10Log0LIg0L/RgNC+0LRcbiAgICAgIGNvbnN0IGluaXRpYWxDYXJkc0xpc3QgPSBuZXcgU2VjdGlvbiAoe1xuICAgICAgICByZW5kZXJlcjogKHtuYW1lLCBsaW5rLCBsaWtlcywgY2FyZElkLCBvd25lciwgdXNlcklkfSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7bmFtZSwgbGluaywgbGlrZXMsIGNhcmRJZCwgb3duZXIsIHVzZXJJZH0sICcjY2FyZC10ZW1wbGF0ZScsIG9wZW5Qb3B1cFdpdGhJbWFnZSwgb3BlblBvcHVwV2l0aFF1ZXN0aW9uLCBsaWtlQ2FyZCk7XG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgICAgICAgIGluaXRpYWxDYXJkc0xpc3QuYWRkSXRlbUFwcGVuZChjYXJkRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0sICcuY2FyZHMnKVxuICAgICAgXG4gICAgICAvLyDQpNC+0YDQvNGLIC0tINCy0LDQu9C40LTQsNGG0LjRj1xuICAgICAgY29uc3QgcG9wdXBFZGl0UHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHBhcmFtZXRlcnNWYWxpZGF0aW9uLCBwYXJhbWV0ZXJzVmFsaWRhdGlvbi5wb3B1cEVkaXRQcm9maWxlU2VsZWN0b3IpO1xuICAgICAgY29uc3QgcG9wdXBBZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IocGFyYW1ldGVyc1ZhbGlkYXRpb24sIHBhcmFtZXRlcnNWYWxpZGF0aW9uLnBvcHVwQWRkRm9ybSk7XG4gICAgICBjb25zdCBwb3B1cEF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwYXJhbWV0ZXJzVmFsaWRhdGlvbiwgcGFyYW1ldGVyc1ZhbGlkYXRpb24ucG9wdXBBdmF0YXJGb3JtKTtcblxuXG4gICAgICAvLyDQpNC+0YDQvNCwINC/0YDQvtGE0LjQu9GPICsg0LrQvtC90YHRgtCw0L3RgtGLXG4gICAgICBjb25zdCBhdmF0YXJFZGl0TGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fb3ZlcmxheScpO1xuICAgICAgY29uc3QgYXZhdGFyVXNlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcbiAgICAgIGNvbnN0IHBvcHVwRWRpdFByb2ZpbGVPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG4gICAgICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0taXRlbV90eXBlX25hbWUtaW5wdXQnKTsgXG4gICAgICBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybS1pdGVtX3R5cGVfam9iLWlucHV0Jyk7XG5cbiAgICAgIGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgbmFtZVByb2ZpbGU6Jy5wcm9maWxlX19uYW1lJywgam9iUHJvZmlsZTogJy5wcm9maWxlX19qb2InIH0pO1xuXG4gICAgICAvLyDRhNC+0YDQvNCwINC/0L4g0LTQsNC90L3Ri9C8INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuICAgICAgY29uc3QgcG9wdXBFZGl0Rm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgICAgICAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX2VkaXQtZm9ybScsXG4gICAgICAgIGhhbmRsZVN1Ym1pdEZvcm06IChpbnB1dFZhbHVlcykgPT4ge1xuICAgICAgICAgIGFwaS5yZW5ld1VzZXJJbmZvKGlucHV0VmFsdWVzKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHQpO1xuICAgICAgICAgICAgICBwb3B1cEVkaXRGb3JtLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbmFsbHkgKCgpID0+IHtcbiAgICAgICAgICAgICAgcG9wdXBFZGl0Rm9ybS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgYWxlcnQoZXJyKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyDRhNC+0YDQvNCwINC/0L4g0LDQstCw0YLQsNGA0LrQtVxuICAgICAgY29uc3QgcG9wdXBBdmF0YXJGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgICAgICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfYXZhdGFyLWZvcm0nLFxuICAgICAgICBoYW5kbGVTdWJtaXRGb3JtOiAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICAgICAgICBhcGkucmVuZXdVc2VyQXZhdGFyKGlucHV0VmFsdWVzKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICBhdmF0YXJVc2VyLnNyYyA9IHJlc3VsdC5hdmF0YXI7XG4gICAgICAgICAgICAgIHBvcHVwQXZhdGFyRm9ybS5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5ICgoKSA9PiB7XG4gICAgICAgICAgICAgIHBvcHVwQXZhdGFyRm9ybS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgYWxlcnQoZXJyKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG5cbiAgICAgIC8vINCk0L7RgNC80LAg0LTQu9GPINGD0LLQtdC70LjRh9C10L3QuNGOINC60LDRgNGC0LjQvdC+0Log0LIg0LrQsNGA0YLQvtGH0LrQsNGFICsg0LrQvtC70LHRjdC6INC00LvRjyDRhNC+0YDQvNGLXG4gICAgICBjb25zdCB6b29tSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX3pvb20taW1hZ2UnKTtcblxuICAgICAgZnVuY3Rpb24gb3BlblBvcHVwV2l0aEltYWdlKHtuYW1lLGxpbmt9KSB7XG4gICAgICAgIHpvb21JbWFnZS5vcGVuKHtuYW1lLGxpbmt9KTtcbiAgICAgIH1cblxuICAgICAgLy8g0KTQvtGA0LzQsCDRgSDQstC+0L/RgNC+0YHQvtC8INC90LAg0YPQtNCw0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4XG4gICAgICBjb25zdCBkZWxldGVDYXJkID0gbmV3IFBvcHVwV2l0aFF1ZXN0aW9uKHtcbiAgICAgICAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX3F1ZXN0aW9uJyxcbiAgICAgICAgaGFuZGxlU3VibWl0Rm9ybTogKHtlbGVtZW50LCBpZH0pID0+IHtcbiAgICAgICAgICBjb25zdCBkZWxldGVFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICBjb25zdCBpZEVsZW1lbnQgPSBpZDtcbiAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChpZEVsZW1lbnQpXG4gICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGVFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZUNhcmQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgYWxlcnQoZXJyKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIG9wZW5Qb3B1cFdpdGhRdWVzdGlvbih7ZWxlbWVudCwgaWR9KSB7XG4gICAgICAgIGRlbGV0ZUNhcmQub3Blbih7ZWxlbWVudCwgaWR9KTtcbiAgICAgIH1cblxuICAgICAgLy8g0KTRg9C90LrRhtC40Y8g0L/QviDQu9Cw0LnQutCw0LxcbiAgICAgIGZ1bmN0aW9uIGxpa2VDYXJkKHtlbGVtZW50LCBjYXJkSWQsIG1ldGhvZH0pIHtcbiAgICAgICAgYXBpLmxpa2VDYXJkKGNhcmRJZCwgbWV0aG9kKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19saWtlJykuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZHNfX2xpa2VfYWN0aXZlJyk7XG4gICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fY291bnRlcicpLnRleHRDb250ZW50ID0gcmVzdWx0Lmxpa2VzLmxlbmd0aDtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgYWxlcnQoZXJyKTtcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG5cbiAgICAgIC8vINCk0L7RgNC80LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0YvRhSDQutCw0YDRgtC+0YfQtdC6ICsg0LrQvtC90YHRgtCw0L3RgtGLXG4gICAgICBjb25zdCBwb3B1cE9wZW5CdXR0b25BZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcblxuICAgICAgY29uc3QgcG9wdXBBZGRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgICAgICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfYWRkLWZvcm0nLFxuICAgICAgICBoYW5kbGVTdWJtaXRGb3JtOiAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICAgICAgICBhcGkuY3JlYXRlTmV3Q2FyZChpbnB1dFZhbHVlcylcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICAgICAgICAgICAgICBuYW1lOiByZXN1bHQubmFtZSwgXG4gICAgICAgICAgICAgICAgbGluazogcmVzdWx0LmxpbmssIFxuICAgICAgICAgICAgICAgIGxpa2VzOiByZXN1bHQubGlrZXMsIFxuICAgICAgICAgICAgICAgIGNhcmRJZDogcmVzdWx0Ll9pZCwgXG4gICAgICAgICAgICAgICAgb3duZXI6IHJlc3VsdC5vd25lci5faWQsXG4gICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyRGF0YS5faWR9LCAnI2NhcmQtdGVtcGxhdGUnLCBvcGVuUG9wdXBXaXRoSW1hZ2UsIG9wZW5Qb3B1cFdpdGhRdWVzdGlvbiwgbGlrZUNhcmQpO1xuICAgICAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gICAgICAgICAgICAgIGluaXRpYWxDYXJkc0xpc3QuYWRkSXRlbVByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICAgICAgICAgICAgICBwb3B1cEFkZEZvcm0uY2xvc2UoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseSAoKCkgPT4ge1xuICAgICAgICAgICAgICBwb3B1cEFkZEZvcm0ucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgIGFsZXJ0KGVycik7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8g0LLRi9Cy0L7QtNC40Lwg0LrQsNGA0YLQvtGH0LrQuCDQsiDQv9GA0L7QtCDQuCDQtNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gICAgICBpbml0aWFsQ2FyZHNMaXN0LnJlbmRlckl0ZW1zKGNhcmRzLCB7dXNlcklkOiB1c2VyRGF0YS5faWR9KTtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgICAgIGF2YXRhclVzZXIuc3JjID0gdXNlckRhdGEuYXZhdGFyO1xuXG4gICAgICAvL9Cw0LrRgtC40LLQuNGA0YPQtdC8INCy0LDQu9C40LTQsNGG0LjRjlxuICAgICAgcG9wdXBFZGl0UHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gICAgICBwb3B1cEFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgICAgcG9wdXBBdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuICAgICAgLy8g0LLQtdGI0LDQtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0YTQvtGA0Lwg0YPQstC10LvQuNGH0LXQvdC40Y8g0Lgg0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG4gICAgICB6b29tSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIGRlbGV0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgICAgLy8gLS3QvdCw0LLQtdGI0LjQstCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INGB0L7QsdGL0YLQuNC5INC90LAg0YTQvtGA0LzRgyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQtdC6INC4INC90LAg0LrQvdC+0L/QutGDINC+0YLQutGA0YvRgtC40Y8g0YTQvtGA0LzRi1xuICAgICAgcG9wdXBBZGRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICBwb3B1cE9wZW5CdXR0b25BZGRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBwb3B1cEFkZEZvcm1WYWxpZGF0b3IuY2xlYW5JbnB1dEVycm9ycygpO1xuICAgICAgICBwb3B1cEFkZEZvcm0ub3BlbigpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIC0t0L3QsNCy0LXRiNC40LLQsNC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQvdCwINGE0L7RgNC80Ysg0L/RgNC+0YTQuNC70Y8sINC90LAg0LrQvdC+0L/QutGDINC4INC40LrQvtC90LrRgyDQvtGC0LrRgNGL0YLQuNGPXG4gICAgICBwb3B1cEVkaXRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICBwb3B1cEF2YXRhckZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgICAgcG9wdXBFZGl0UHJvZmlsZU9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXJQcm9maWxlID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICAgICAgbmFtZUlucHV0LnZhbHVlID0gdXNlclByb2ZpbGUubmFtZTtcbiAgICAgICAgam9iSW5wdXQudmFsdWUgPSB1c2VyUHJvZmlsZS5hYm91dDtcbiAgICAgICAgcG9wdXBFZGl0UHJvZmlsZVZhbGlkYXRvci5jbGVhbklucHV0RXJyb3JzKCk7XG4gICAgICAgIHBvcHVwRWRpdEZvcm0ub3BlbigpO1xuICAgICAgfSlcblxuICAgICAgYXZhdGFyRWRpdExheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBwb3B1cEF2YXRhckZvcm1WYWxpZGF0b3IuY2xlYW5JbnB1dEVycm9ycygpO1xuICAgICAgICBwb3B1cEF2YXRhckZvcm0ub3BlbigpXG4gICAgICB9KTtcblxuICAgIH0pKCk7XG4gIH0pXG4gIC5jYXRjaChlcnIgPT4ge1xuICAgIGFsZXJ0KGVycik7XG4gIH0pXG5cblxuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHt1cmwsIGhlYWRlcnN9KSB7XG4gICAgdGhpcy5fdXJsID0gdXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG4gIFxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbihyZXMgPT4ge1xuICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KVxuICB9XG5cbiAgcmVuZXdVc2VySW5mbyhpbnB1dFZhbHVlcykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtuYW1lOiBpbnB1dFZhbHVlcy5uYW1lLCBhYm91dDogaW5wdXRWYWx1ZXMuYWJvdXR9KVxuICAgIH0pXG4gICAgLnRoZW4ocmVzID0+IHtcbiAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KVxuICB9XG5cbiAgcmVuZXdVc2VyQXZhdGFyKGlucHV0VmFsdWVzKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHthdmF0YXI6IGlucHV0VmFsdWVzLmF2YXRhcn0pXG4gICAgfSlcbiAgICAudGhlbihyZXMgPT4ge1xuICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pXG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgLnRoZW4ocmVzID0+IHtcbiAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KVxuICB9IFxuXG4gIGNyZWF0ZU5ld0NhcmQoaW5wdXRWYWx1ZXMpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogaW5wdXRWYWx1ZXMudGl0bGUsIFxuICAgICAgICBsaW5rOiBpbnB1dFZhbHVlcy51cmxcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbihyZXMgPT4ge1xuICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pXG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4ocmVzID0+IHtcbiAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KVxuICB9XG4gIFxuICBsaWtlQ2FyZChjYXJkSWQsIG1ldGhvZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSkgXG4gIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9